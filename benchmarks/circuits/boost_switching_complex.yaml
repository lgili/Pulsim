schema: pulsim-v1
version: 1
benchmark:
  id: boost_switching_complex
  category: switching
  observables:
    - column: V(out)
  expectations:
    metrics:
      max_error: 8e-2
  validation:
    type: reference
    observable: V(out)
    baseline: baselines/boost_switching_complex.csv
simulation:
  tstart: 0.0
  tstop: 700e-6
  dt: 0.2e-6
  dt_max: 0.8e-6
  adaptive_timestep: false
  integrator: bdf1
  enable_events: false
  max_step_retries: 8
  newton:
    max_iterations: 220
    initial_damping: 0.5
    min_damping: 1e-4
    auto_damping: true
  fallback:
    trace_retries: true
    enable_transient_gmin: true
    gmin_retry_threshold: 1
    gmin_initial: 1e-8
    gmin_max: 1e-4
    gmin_growth: 10
components:
  - type: voltage_source
    name: Vdc
    nodes: [in, 0]
    waveform:
      type: dc
      value: 24.0

  - type: voltage_source
    name: Vpwm
    nodes: [ctrl, 0]
    waveform:
      type: pwm
      v_high: 10.0
      v_low: 0.0
      frequency: 100000
      duty: 0.58
      dead_time: 100e-9

  - type: vcswitch
    name: S1
    nodes: [ctrl, in, sw]
    v_threshold: 5.0
    g_on: 200.0
    g_off: 1e-6

  - type: resistor
    name: Rdcr
    nodes: [in, n_l]
    value: 30m
  - type: inductor
    name: L1
    nodes: [n_l, sw]
    value: 120u

  - type: diode
    name: D1
    nodes: [sw, out]
    g_on: 200.0
    g_off: 1e-6

  - type: capacitor
    name: C1
    nodes: [out, 0]
    value: 220u

  - type: resistor
    name: Rload
    nodes: [out, 0]
    value: 80

  - type: resistor
    name: Rbleed_sw
    nodes: [sw, 0]
    value: 1e6
